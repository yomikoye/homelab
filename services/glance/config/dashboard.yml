- name: Dashboard
  # head-widgets:
  #   - type: markets
  #     hide-header: true
  #     markets:
  #       - symbol: AMZN
  #         name: Amazon
  #       - symbol: BTC-USD
  #         name: Bitcoin
  #       - symbol: GOOGL
  #         name: Google
  #       - symbol: HIMS
  #         name: Hims
  #       - symbol: HOOD
  #         name: Hood
  #       - symbol: MSTR
  #         name: Strategy
  #       - symbol: SOUN
  #         name: Soun
  #       - symbol: SMCI
  #         name: Smci
  #       - symbol: TSM
  #         name: Tsmc
  #       - symbol: V
  #         name: Visa
  columns:
    - size: small
      widgets:
        - type: calendar
          first-day-of-week: monday
        - type: search
          search-engine: google
          new-tab: true
          bangs:
            - title: Google
              shortcut: "!gg"
              url: https://www.google.com/search?q={QUERY}
            - title: Perplexity
              shortcut: "!pp"
              url: https://www.perplexity.ai/search?q={QUERY}
            - title: YouTube
              shortcut: "!yy"
              url: https://www.youtube.com/results?search_query={QUERY}
        - type: to-do
        - type: custom-api
          title: Random Fact
          cache: 1h
          url: https://uselessfacts.jsph.pl/api/v2/facts/random
          template: |
            <p class="size-h4 color-paragraph">{{ .JSON.String "text" }}</p>
        - type: rss
          title: GOODREADS
          feeds:
            - url: https://www.goodreads.com/user/updates_rss/29724933
              title: kabayomi
          limit: 4
          collapse-after: 4
        - type: rss
          title: RSS FEED
          feeds:
            - url: https://www.investing.com/rss/news.rss
              title: Investing.com
            - url: https://ayearofreadingtheworld.com/feed/
              title: Ann Morgan
          limit: 4
          collapse-after: 4

    - size: full
      widgets:
        - type: hacker-news
          title: HACKER NEWS
          limit: 6
          collapse-after: 5
        - type: videos
          title: VIDEOS
          style: grid-cards
          channels:
            - UCc9J8pSak1Aieeoh1Gr_Zxg  # Beat The Denominator
            - UC45qUbfYR9AmwR18sxS2eNQ  # Options With Ravish
            - UCDarEqyzF1T0wJlCoYwFD5A  # Credit Spread Investing
            - UCBJycsmduvYEL83R_U4JriQ  # MKBHD
            - UCbta0n8i6Rljh0obO7HzG9A  # Joseph Carlson
            - UCpIn7ox7j7bH_OFj7tYouOQ  # John Savill
          limit: 8
          collapse-after: 8
        - type: group
          define: &shared-properties
            type: reddit
            show-thumbnails: false
            limit: 12
            collapse-after: 12
          widgets:
            - subreddit: homelab
              title: /R/HOMELAB
              <<: *shared-properties
            - subreddit: selfhosted
              title: /R/SELFHOSTED
              <<: *shared-properties
            - subreddit: optionswheel
              title: /R/OPTIONSWHEEL
              <<: *shared-properties
            - subreddit: smallstreetbets
              title: /R/SMALLSTREETBETS
              <<: *shared-properties
            - subreddit: wallstreetbets
              title: /R/WALLSTREETBETS
              <<: *shared-properties
            

    - size: small
      widgets:
        # - type: weather
        #   title: WEATHER
        #   location: Krakow, Poland
        #   units: metric
        #   hour-format: 12h
        - type: custom-api
          title: Beszel Metrics
          url: https://${BESZEL_URL}/api/collections/systems/records
          method: GET
          options:
            redirect-url: "https://${BESZEL_URL}" # You must use "" and http:// or https://
          headers:
            Authorization: Bearer ${BESZEL_TOKEN}
            Accept: application/json
          template: |
            {{ $redirect := .Options.StringOr "redirect-url" "" }}
            {{ $newTab := .Options.BoolOr "in-new-tab" false }}
            {{ $hideKernel := .Options.BoolOr "hide-kernel" false }}
            {{ $hideUptime := .Options.BoolOr "hide-uptime" false }}
            {{ $hideCPUInfo := .Options.BoolOr "hide-cpu-info" false }}
            {{ $hideIP := .Options.BoolOr "hide-ip" false }}
            {{ $collapsible := .Options.BoolOr "collapsible" false }}
            {{ $items := .JSON.Array "items" }}
            {{ range $items }}
              {{ $info := .Get "info" }}
              {{ $name := .String "name" }}
              {{ $link := "" }}
              {{ if ne $redirect "" }}
                {{ $link = printf "%s/system/%s" $redirect $name }}
              {{ end }}
              <div style="font-size: 1.15em;">
                {{ if eq (.String "status") "up" }}
                  <span class="status-dot color-positive">‚óè</span>
                {{ else }}
                  <span class="status-dot color-negative">‚óè</span>
                {{ end }}
                {{ if ne $redirect "" }}
                  <a class="color-highlight text-truncate" href="{{ printf "%s/system/%s" $redirect $name | safeURL }}" {{ if $newTab }}target="_blank" rel="noopener"{{ end }}>
                    {{ $name }}{{ if not $hideIP }} ({{ .String "host" }}){{ end }}
                  </a>
                {{ else }}
                  <span class="color-highlight text-truncate">
                    {{ $name }}{{ if not $hideIP }} ({{ .String "host" }}){{ end }}
                  </span>
                {{ end }}
              </div>
              {{ if $collapsible }}
                <details class="margin-top-5">
                  <summary class="size-h5 color-subtle" style="cursor: pointer;">Metrics</summary>
                  <div class="margin-top-5">
                    {{ if not $hideKernel }}
                      <p style="font-size: 1em;">Kernel: {{ $info.String "k" }}</p>
                    {{ end }}
                    {{ if not $hideUptime }}
                      {{ $uptimeSec := $info.Float "u" }}
                      {{ if ge $uptimeSec 86400.0 }}
                        <p style="font-size: 1em;">Uptime: {{ printf "%.2f" (mul $uptimeSec 0.000011574) }}d</p>
                      {{ else }}
                        <p style="font-size: 1em;">Uptime: {{ printf "%.2f" (mul $uptimeSec 0.000277778) }}h</p>
                      {{ end }}
                    {{ end }}
                    {{ if not $hideCPUInfo }}
                      <p style="font-size: 1em;">CPU: {{ replaceAll "CPU " "" ($info.String "m") }}</p>
                    {{ end }}
                    <p style="font-size: 1em; margin-top: 0.5em;">üìä Cpu: {{ $info.Float "cpu" }}%</p>
                    <p style="font-size: 1em;">üß† Memory: {{ $info.Float "mp" }}%</p>
                    <p style="font-size: 1em;">üíæ Disk: {{ $info.Float "dp" }}%</p>
                  </div>
                </details>
              {{ else }}
                <div class="margin-top-5">
                  {{ if not $hideKernel }}
                    <p style="font-size: 1em;">Kernel: {{ $info.String "k" }}</p>
                  {{ end }}
                  {{ if not $hideUptime }}
                    {{ $uptimeSec := $info.Float "u" }}
                    {{ if ge $uptimeSec 86400.0 }}
                      <p style="font-size: 1em;">Uptime: {{ printf "%.2f" (mul $uptimeSec 0.000011574) }}d</p>
                    {{ else }}
                      <p style="font-size: 1em;">Uptime: {{ printf "%.2f" (mul $uptimeSec 0.000277778) }}h</p>
                    {{ end }}
                  {{ end }}
                  {{ if not $hideCPUInfo }}
                    <p style="font-size: 1em;">CPU: {{ replaceAll "CPU " "" ($info.String "m") }}</p>
                  {{ end }}
                  <p style="font-size: 1em; margin-top: 0.5em;">üìä Cpu: {{ $info.Float "cpu" }}%</p>
                  <p style="font-size: 1em;">üß† Memory: {{ $info.Float "mp" }}%</p>
                  <p style="font-size: 1em;">üíæ Disk: {{ $info.Float "dp" }}%</p>
                </div>
              {{ end }}
            {{ end }}
        - type: monitor
          cache: 1m
          title: Services
          sites:            
            # - title: Audible
            #   url: https://audible.koye.casa
            #   icon: di:audiobookshelf
            # - title: Books
            #   url: https://books.koye.casa
            #   icon: di:calibre
            - title: Beszel
              url: https://monitor.koye.casa
              icon: di:beszel
            - title: Chat
              url: https://chat.koye.casa
              icon: di:open-webui
            - title: Draw
              url: https://draw.koye.casa
              icon: di:excalidraw
            - title: Glance
              url: https://app.koye.casa
              icon: di:glance
            - title: Jellyfin
              url: https://jellyfin.koye.casa
              icon: di:jellyfin
            - title: Kavita
              url: https://kavita.koye.casa
              icon: di:kavita
            - title: Miner
              url: http://192.168.88.34
              icon: di:bitcoin
            - title: Prowlarr
              url: https://prowlarr.koye.casa
              icon: di:prowlarr
            - title: qbit
              url: https://qbit.koye.casa
              icon: di:qbittorrent
            - title: Radarr
              url: https://radarr.koye.casa
              icon: di:radarr
            - title: Readarr
              url: https://readarr.koye.casa
              icon: di:readarr
            - title: Sonarr
              url: https://sonarr.koye.casa
              icon: di:sonarr
            - title: TOS
              url: https://trade.thinkorswim.com
              icon: si:svg
            - title: TVIEW
              url: https://tradingview.com
              icon: di:trading-view
            - title: Optionable
              url: https://optionable.koye.casa
              icon: di:elysian
            - title: PDF
              url: https://pdf.koye.casa
              icon: di:bentopdf
            - title: Pi-hole
              url: https://pihole.koye.casa/admin
              icon: di:pi-hole
            - title: Traefik
              url: https://traefik.koye.casa
              icon: di:traefik
            - title: PVE
              url: http://192.168.88.2:8006
              icon: di:proxmox

